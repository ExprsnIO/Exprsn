<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Exprsn Timeline - Social feed & timeline management system">
    <title><%= title %> | Exprsn Timeline</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
    <%- include('partials/styles') %>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <%- include('partials/nav') %>

    <main id="main-content">
        <div class="container">
            <!-- Hero Section -->
            <div class="hero-section">
                <div class="hero-icon mb-4">
                    <i class="bi bi-stars"></i>
                </div>
                <h1 class="hero-title">Exprsn Timeline</h1>
                <p class="hero-subtitle mb-4">
                    Your social feed and timeline management system. Share posts, interact with content,
                    organize lists, and discover trending topics in real-time.
                </p>
                <div class="hero-actions">
                    <% if (!user) { %>
                        <a class="btn btn-light btn-lg shadow-sm me-3" href="/auth/login">
                            <i class="bi bi-box-arrow-in-right me-2"></i>
                            Sign In
                        </a>
                        <a class="btn btn-outline-light btn-lg shadow-sm" href="/auth/register">
                            <i class="bi bi-person-plus me-2"></i>
                            Register
                        </a>
                    <% } else { %>
                        <a class="btn btn-light btn-lg shadow-sm me-3" href="/feed">
                            <i class="bi bi-collection me-2"></i>
                            View Feed
                        </a>
                        <a class="btn btn-outline-light btn-lg shadow-sm" href="/posts">
                            <i class="bi bi-plus-circle me-2"></i>
                            Create Post
                        </a>
                    <% } %>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="row g-4 mb-5">
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(102, 126, 234, 0.1); color: var(--exprsn-primary);">
                            <i class="bi bi-file-text"></i>
                        </div>
                        <div class="stat-value"><%= stats.totalPosts %></div>
                        <div class="stat-label">Total Posts</div>
                        <div class="stat-meta text-muted mt-2 small">
                            <i class="bi bi-check-circle text-success me-1"></i>
                            <%= stats.activePosts %> published
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: var(--exprsn-success);">
                            <i class="bi bi-list-ul"></i>
                        </div>
                        <div class="stat-value"><%= stats.totalLists %></div>
                        <div class="stat-label">Lists</div>
                        <div class="stat-meta text-muted mt-2 small">
                            <i class="bi bi-people text-info me-1"></i>
                            Content collections
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(59, 130, 246, 0.1); color: var(--exprsn-info);">
                            <i class="bi bi-people"></i>
                        </div>
                        <div class="stat-value"><%= stats.totalUsers %></div>
                        <div class="stat-label">Active Users</div>
                        <div class="stat-meta text-muted mt-2 small">
                            <i class="bi bi-graph-up text-success me-1"></i>
                            Content creators
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1); color: var(--exprsn-warning);">
                            <i class="bi bi-lightning"></i>
                        </div>
                        <div class="stat-value" id="realtime-count">0</div>
                        <div class="stat-label">Real-time Updates</div>
                        <div class="stat-meta text-muted mt-2 small">
                            <i class="bi bi-wifi text-success me-1"></i>
                            Socket.IO connected
                        </div>
                    </div>
                </div>
            </div>

            <!-- Features -->
            <div class="row g-4 mb-5">
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="mb-3 text-primary" style="font-size: 2rem;">
                                <i class="bi bi-file-text"></i>
                            </div>
                            <h5 class="card-title">Post Management</h5>
                            <p class="card-text text-muted">
                                Create, edit, and manage posts with rich content support.
                                Schedule posts, track engagement, and manage drafts.
                            </p>
                            <a href="/posts" class="btn btn-outline-primary btn-sm">
                                <i class="bi bi-arrow-right me-1"></i> Manage Posts
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="mb-3 text-success" style="font-size: 2rem;">
                                <i class="bi bi-collection"></i>
                            </div>
                            <h5 class="card-title">Timeline Feed</h5>
                            <p class="card-text text-muted">
                                View your personalized timeline feed with real-time updates.
                                Interact with posts through likes, replies, and reposts.
                            </p>
                            <a href="/feed" class="btn btn-outline-success btn-sm">
                                <i class="bi bi-arrow-right me-1"></i> View Feed
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="mb-3 text-info" style="font-size: 2rem;">
                                <i class="bi bi-list-ul"></i>
                            </div>
                            <h5 class="card-title">Content Lists</h5>
                            <p class="card-text text-muted">
                                Organize content into custom lists. Create curated
                                collections and share them with others.
                            </p>
                            <a href="/lists" class="btn btn-outline-info btn-sm">
                                <i class="bi bi-arrow-right me-1"></i> Manage Lists
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity (if user is logged in) -->
            <% if (user) { %>
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title mb-4">
                        <i class="bi bi-clock-history me-2"></i>
                        Recent Activity
                    </h5>
                    <p class="text-muted">
                        View your recent posts, interactions, and timeline activity.
                    </p>
                    <div class="d-flex gap-2">
                        <a href="/posts" class="btn btn-primary btn-sm">
                            <i class="bi bi-file-text me-1"></i> My Posts
                        </a>
                        <a href="/feed" class="btn btn-outline-primary btn-sm">
                            <i class="bi bi-collection me-1"></i> Feed
                        </a>
                        <a href="/search" class="btn btn-outline-secondary btn-sm">
                            <i class="bi bi-search me-1"></i> Search
                        </a>
                    </div>
                </div>
            </div>
            <% } %>
        </div>
    </main>

    <%- include('partials/footer') %>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <%- include('partials/scripts') %>

    <script>
        // Real-time update counter
        let updateCount = 0;
        const updateCounter = document.getElementById('realtime-count');

        socket.on('post:created', () => {
            updateCount++;
            updateCounter.textContent = updateCount;
            updateCounter.parentElement.parentElement.classList.add('animate-pulse');
            setTimeout(() => {
                updateCounter.parentElement.parentElement.classList.remove('animate-pulse');
            }, 1000);
        });

        // Animate on load
        document.addEventListener('DOMContentLoaded', () => {
            const statCards = document.querySelectorAll('.stat-card');
            statCards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    card.style.transition = 'all 0.5s ease';
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 50);
                }, index * 100);
            });
        });
    </script>
</body>
</html>
