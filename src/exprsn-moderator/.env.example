# ═══════════════════════════════════════════════════════════
# Exprsn Moderator Service - Environment Configuration
# Copy this file to .env and configure with your values
# ═══════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────
# Service Configuration
# ───────────────────────────────────────────────────────────

NODE_ENV=development
MODERATOR_SERVICE_PORT=3006
MODERATOR_SERVICE_HOST=moderator.exprsn.io

# ───────────────────────────────────────────────────────────
# Database Configuration (PostgreSQL)
# ───────────────────────────────────────────────────────────

MODERATOR_PG_HOST=localhost
MODERATOR_PG_PORT=5432
MODERATOR_PG_DATABASE=exprsn_moderator
MODERATOR_PG_USER=moderator_service
MODERATOR_PG_PASSWORD=your_secure_password_here

# Connection Pool
DB_POOL_MAX=20
DB_POOL_MIN=5
DB_POOL_ACQUIRE=30000
DB_POOL_IDLE=10000

# ───────────────────────────────────────────────────────────
# Redis Configuration
# ───────────────────────────────────────────────────────────

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=3

# ───────────────────────────────────────────────────────────
# Certificate Authority Integration
# ───────────────────────────────────────────────────────────

CA_SERVICE_URL=http://localhost:3000
MODERATOR_CA_DOMAIN=moderator.exprsn.io
MODERATOR_CERT_SERIAL=<your_certificate_serial>
MODERATOR_PRIVATE_KEY_PATH=./certs/moderator-key.pem
MODERATOR_CERTIFICATE_PATH=./certs/moderator-cert.pem
CA_ROOT_CERT_PATH=./certs/ca-root.pem
MODERATOR_SERVICE_TOKEN=<generate_from_ca>

# ───────────────────────────────────────────────────────────
# AI Providers - Claude AI (Anthropic)
# ───────────────────────────────────────────────────────────

CLAUDE_ENABLED=true
CLAUDE_API_KEY=sk-ant-api03-...
CLAUDE_MODEL=claude-3-5-sonnet-20241022
CLAUDE_MAX_TOKENS=4096
CLAUDE_TEMPERATURE=0.3

# ───────────────────────────────────────────────────────────
# AI Providers - OpenAI
# ───────────────────────────────────────────────────────────

OPENAI_ENABLED=true
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MODERATION_MODEL=text-moderation-latest
OPENAI_VISION_MODEL=gpt-4-vision-preview
OPENAI_MAX_TOKENS=4096

# ───────────────────────────────────────────────────────────
# Local ML Models (Optional)
# ───────────────────────────────────────────────────────────

LOCAL_ML_ENABLED=false
NSFW_MODEL_PATH=/models/nsfw-detector
TOXICITY_MODEL_PATH=/models/toxicity-classifier
SPAM_MODEL_PATH=/models/spam-detector

# ───────────────────────────────────────────────────────────
# Classification Thresholds
# ───────────────────────────────────────────────────────────

AUTO_APPROVE_THRESHOLD=30
MANUAL_REVIEW_THRESHOLD=51
AUTO_REJECT_THRESHOLD=91

# ───────────────────────────────────────────────────────────
# Moderation Features
# ───────────────────────────────────────────────────────────

ENABLE_AUTO_MODERATION=true
ENABLE_MANUAL_REVIEW=true
ENABLE_APPEALS=true
ENABLE_USER_REPORTS=true
MAX_REVIEW_QUEUE_SIZE=10000

# ───────────────────────────────────────────────────────────
# Socket.io Configuration
# ───────────────────────────────────────────────────────────

SOCKET_ENABLED=true
SOCKET_PORT=3007
SOCKET_CORS_ORIGIN=*

# ───────────────────────────────────────────────────────────
# Rate Limiting
# ───────────────────────────────────────────────────────────

RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100

# ───────────────────────────────────────────────────────────
# Caching & Logging
# ───────────────────────────────────────────────────────────

CACHE_ENABLED=true
LOG_LEVEL=info
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs/moderator.log

# ───────────────────────────────────────────────────────────
# CORS & Service URLs
# ───────────────────────────────────────────────────────────

CORS_ORIGIN=*
TIMELINE_SERVICE_URL=http://localhost:3004
SPARK_SERVICE_URL=http://localhost:3002
GALLERY_SERVICE_URL=http://localhost:3008
LIVE_SERVICE_URL=http://localhost:3009
FILEVAULT_SERVICE_URL=http://localhost:3007
